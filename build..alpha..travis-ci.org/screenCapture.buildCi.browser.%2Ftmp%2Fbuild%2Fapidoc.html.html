<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/ptarjan/node-cache#readme">memory-cache (v0.1.6)</a>
</h1>
<h4>A simple in-memory cache. put(), get() and del()</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.memory-cache">module memory-cache</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.clear">
            function <span class="apidocSignatureSpan">memory-cache.</span>clear
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.debug">
            function <span class="apidocSignatureSpan">memory-cache.</span>debug
            <span class="apidocSignatureSpan">(bool)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.del">
            function <span class="apidocSignatureSpan">memory-cache.</span>del
            <span class="apidocSignatureSpan">(key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.get">
            function <span class="apidocSignatureSpan">memory-cache.</span>get
            <span class="apidocSignatureSpan">(key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.hits">
            function <span class="apidocSignatureSpan">memory-cache.</span>hits
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.keys">
            function <span class="apidocSignatureSpan">memory-cache.</span>keys
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.memsize">
            function <span class="apidocSignatureSpan">memory-cache.</span>memsize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.misses">
            function <span class="apidocSignatureSpan">memory-cache.</span>misses
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.put">
            function <span class="apidocSignatureSpan">memory-cache.</span>put
            <span class="apidocSignatureSpan">(key, value, time, timeoutCallback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.size">
            function <span class="apidocSignatureSpan">memory-cache.</span>size
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.memory-cache" id="apidoc.module.memory-cache">module memory-cache</a></h1>


    <h2>
        <a href="#apidoc.element.memory-cache.clear" id="apidoc.element.memory-cache.clear">
        function <span class="apidocSignatureSpan">memory-cache.</span>clear
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clear = function () {
  for (var key in cache) {
    clearTimeout(cache[key].timeout);
  }
  size = 0;
  cache = Object.create(null);
  if (debug) {
    hitCount = 0;
    missCount = 0;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
chai.use(sinonChai);


describe('node-cache', function() {
beforeEach(function() {
  clock = sinon.useFakeTimers();

  cache.<span class="apidocCodeKeywordSpan">clear</span>();
});

afterEach(function() {
  clock.restore();
});

describe('put()', function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.debug" id="apidoc.element.memory-cache.debug">
        function <span class="apidocSignatureSpan">memory-cache.</span>debug
        <span class="apidocSignatureSpan">(bool)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">debug = function (bool) {
  debug = bool;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  afterEach(function() {
clock.restore();
  });

  describe('put()', function() {
before(function() {
  cache.<span class="apidocCodeKeywordSpan">debug</span>(false);
});

it('should allow adding a new item to the cache', function() {
  expect(function() {
    cache.put('key', 'value');
  }).to.not.throw();
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.del" id="apidoc.element.memory-cache.del">
        function <span class="apidocSignatureSpan">memory-cache.</span>del
        <span class="apidocSignatureSpan">(key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">del = function (key) {
  var canDelete = true;

  var oldRecord = cache[key];
  if (oldRecord) {
    clearTimeout(oldRecord.timeout);
    if (!isNaN(oldRecord.expire) &amp;&amp; oldRecord.expire &lt; Date.now()) {
      canDelete = false;
    }
  } else {
    canDelete = false;
  }

  if (canDelete) {
    _del(key);
  }

  return canDelete;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  describe('del()', function() {
before(function() {
  cache.debug(false);
});

it('should return false given a key for an empty cache', function() {
  expect(cache.<span class="apidocCodeKeywordSpan">del</span>('miss')).to.be.false;
});

it('should return false given a key not in a non-empty cache', function() {
  cache.put('key', 'value');
  expect(cache.del('miss')).to.be.false;
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.get" id="apidoc.element.memory-cache.get">
        function <span class="apidocSignatureSpan">memory-cache.</span>get
        <span class="apidocSignatureSpan">(key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (key) {
  var data = cache[key];
  if (typeof data != "undefined") {
    if (isNaN(data.expire) || data.expire &gt;= Date.now()) {
      if (debug) hitCount++;
      return data.value;
    } else {
      // free some space
      if (debug) missCount++;
      size--;
      delete cache[key];
    }
  } else if (debug) {
    missCount++;
  }
  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var cache = require('memory-cache');

// now just use the cache

cache.put('foo', 'bar');
console.log(cache.<span class="apidocCodeKeywordSpan">get</span>('foo'));

// that wasn't too interesting, here's the good part

cache.put('houdini', 'disappear', 100, function(key, value) {
    console.log(key + ' did ' + value);
}); // Time in ms
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.hits" id="apidoc.element.memory-cache.hits">
        function <span class="apidocSignatureSpan">memory-cache.</span>hits
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hits = function () {
  return hitCount;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  expect(cache.size()).to.equal(0);
});

it('should reset the debug cache hits', function() {
  cache.debug(true);
  cache.put('key', 'value');
  cache.get('key');
  expect(cache.<span class="apidocCodeKeywordSpan">hits</span>()).to.equal(1);
  cache.clear();
  expect(cache.hits()).to.equal(0);
});

it('should reset the debug cache misses', function() {
  cache.debug(true);
  cache.put('key', 'value');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.keys" id="apidoc.element.memory-cache.keys">
        function <span class="apidocSignatureSpan">memory-cache.</span>keys
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">keys = function () {
  return Object.keys(cache);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

exports.misses = function() {
  return missCount;
};

exports.keys = function() {
  return Object.<span class="apidocCodeKeywordSpan">keys</span>(cache);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.memsize" id="apidoc.element.memory-cache.memsize">
        function <span class="apidocSignatureSpan">memory-cache.</span>memsize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">memsize = function () {
  var size = 0,
    key;
  for (key in cache) {
    size++;
  }
  return size;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  describe('memsize()', function() {
before(function() {
  cache.debug(false);
});

it('should return 0 given a fresh cache', function() {
  expect(cache.<span class="apidocCodeKeywordSpan">memsize</span>()).to.equal(0);
});

it('should return 1 after adding a single item to the cache', function() {
  cache.put('key', 'value');
  expect(cache.memsize()).to.equal(1);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.misses" id="apidoc.element.memory-cache.misses">
        function <span class="apidocSignatureSpan">memory-cache.</span>misses
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">misses = function () {
  return missCount;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  expect(cache.hits()).to.equal(0);
});

it('should reset the debug cache misses', function() {
  cache.debug(true);
  cache.put('key', 'value');
  cache.get('miss1');
  expect(cache.<span class="apidocCodeKeywordSpan">misses</span>()).to.equal(1);
  cache.clear();
  expect(cache.misses()).to.equal(0);
});

it('should cancel the timeout callbacks for all existing keys', function() {
  var spy1 = sinon.spy();
  var spy2 = sinon.spy();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.put" id="apidoc.element.memory-cache.put">
        function <span class="apidocSignatureSpan">memory-cache.</span>put
        <span class="apidocSignatureSpan">(key, value, time, timeoutCallback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">put = function (key, value, time, timeoutCallback) {
  if (debug) {
    console.log('caching: %s = %j (@%s)', key, value, time);
  }

  if (typeof time !== 'undefined' &amp;&amp; (typeof time !== 'number' || isNaN(time) || time &lt;= 0)) {
    throw new Error('Cache timeout must be a positive number');
  } else if (typeof timeoutCallback !== 'undefined' &amp;&amp; typeof timeoutCallback !== 'function') {
    throw new Error('Cache timeout callback must be a function');
  }

  var oldRecord = cache[key];
  if (oldRecord) {
    clearTimeout(oldRecord.timeout);
  } else {
    size++;
  }

  var record = {
    value: value,
    expire: time + Date.now()
  };

  if (!isNaN(record.expire)) {
    record.timeout = setTimeout(function() {
      _del(key);
      if (timeoutCallback) {
        timeoutCallback(key, value);
      }
    }, time);
  }

  cache[key] = record;

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## Usage

```javascript
var cache = require('memory-cache');

// now just use the cache

cache.<span class="apidocCodeKeywordSpan">put</span>('foo', 'bar');
console.log(cache.get('foo'));

// that wasn't too interesting, here's the good part

cache.put('houdini', 'disappear', 100, function(key, value) {
    console.log(key + ' did ' + value);
}); // Time in ms
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.size" id="apidoc.element.memory-cache.size">
        function <span class="apidocSignatureSpan">memory-cache.</span>size
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">size = function () {
  return size;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  expect(cache.get('key')).to.equal('value');
  expect(cache.del('key')).to.be.true;
  expect(cache.get('key')).to.be.null;
});

it('should decrement the cache size by 1', function() {
  cache.put('key', 'value');
  expect(cache.<span class="apidocCodeKeywordSpan">size</span>()).to.equal(1);
  expect(cache.del('key')).to.be.true;
  expect(cache.size()).to.equal(0);
});

it('should not remove other keys in the cache', function() {
  cache.put('key1', 'value1');
  cache.put('key2', 'value2');
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>