<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/ptarjan/node-cache#readme"

    >memory-cache (v0.1.6)</a>
</h1>
<h4>A simple in-memory cache. put(), get() and del()</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.memory-cache">module memory-cache</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.clear">
            function <span class="apidocSignatureSpan">memory-cache.</span>clear
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.debug">
            function <span class="apidocSignatureSpan">memory-cache.</span>debug
            <span class="apidocSignatureSpan">(bool)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.del">
            function <span class="apidocSignatureSpan">memory-cache.</span>del
            <span class="apidocSignatureSpan">(key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.get">
            function <span class="apidocSignatureSpan">memory-cache.</span>get
            <span class="apidocSignatureSpan">(key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.hits">
            function <span class="apidocSignatureSpan">memory-cache.</span>hits
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.keys">
            function <span class="apidocSignatureSpan">memory-cache.</span>keys
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.memsize">
            function <span class="apidocSignatureSpan">memory-cache.</span>memsize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.misses">
            function <span class="apidocSignatureSpan">memory-cache.</span>misses
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.put">
            function <span class="apidocSignatureSpan">memory-cache.</span>put
            <span class="apidocSignatureSpan">(key, value, time, timeoutCallback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.memory-cache.size">
            function <span class="apidocSignatureSpan">memory-cache.</span>size
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.memory-cache" id="apidoc.module.memory-cache">module memory-cache</a></h1>


    <h2>
        <a href="#apidoc.element.memory-cache.clear" id="apidoc.element.memory-cache.clear">
        function <span class="apidocSignatureSpan">memory-cache.</span>clear
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clear = function () {
  for (var key in cache) {
    clearTimeout(cache[key].timeout);
  }
  size = 0;
  cache = Object.create(null);
  if (debug) {
    hitCount = 0;
    missCount = 0;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
chai.use(sinonChai);


describe(&#x27;node-cache&#x27;, function() {
beforeEach(function() {
  clock = sinon.useFakeTimers();

  cache.<span class="apidocCodeKeywordSpan">clear</span>();
});

afterEach(function() {
  clock.restore();
});

describe(&#x27;put()&#x27;, function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.debug" id="apidoc.element.memory-cache.debug">
        function <span class="apidocSignatureSpan">memory-cache.</span>debug
        <span class="apidocSignatureSpan">(bool)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">debug = function (bool) {
  debug = bool;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  afterEach(function() {
clock.restore();
  });

  describe(&#x27;put()&#x27;, function() {
before(function() {
  cache.<span class="apidocCodeKeywordSpan">debug</span>(false);
});

it(&#x27;should allow adding a new item to the cache&#x27;, function() {
  expect(function() {
    cache.put(&#x27;key&#x27;, &#x27;value&#x27;);
  }).to.not.throw();
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.del" id="apidoc.element.memory-cache.del">
        function <span class="apidocSignatureSpan">memory-cache.</span>del
        <span class="apidocSignatureSpan">(key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">del = function (key) {
  var canDelete = true;

  var oldRecord = cache[key];
  if (oldRecord) {
    clearTimeout(oldRecord.timeout);
    if (!isNaN(oldRecord.expire) &#x26;&#x26; oldRecord.expire &#x3c; Date.now()) {
      canDelete = false;
    }
  } else {
    canDelete = false;
  }

  if (canDelete) {
    _del(key);
  }

  return canDelete;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  describe(&#x27;del()&#x27;, function() {
before(function() {
  cache.debug(false);
});

it(&#x27;should return false given a key for an empty cache&#x27;, function() {
  expect(cache.<span class="apidocCodeKeywordSpan">del</span>(&#x27;miss&#x27;)).to.be.false;
});

it(&#x27;should return false given a key not in a non-empty cache&#x27;, function() {
  cache.put(&#x27;key&#x27;, &#x27;value&#x27;);
  expect(cache.del(&#x27;miss&#x27;)).to.be.false;
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.get" id="apidoc.element.memory-cache.get">
        function <span class="apidocSignatureSpan">memory-cache.</span>get
        <span class="apidocSignatureSpan">(key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (key) {
  var data = cache[key];
  if (typeof data != &#x22;undefined&#x22;) {
    if (isNaN(data.expire) || data.expire &#x3e;= Date.now()) {
      if (debug) hitCount++;
      return data.value;
    } else {
      // free some space
      if (debug) missCount++;
      size--;
      delete cache[key];
    }
  } else if (debug) {
    missCount++;
  }
  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var cache = require(&#x27;memory-cache&#x27;);

// now just use the cache

cache.put(&#x27;foo&#x27;, &#x27;bar&#x27;);
console.log(cache.<span class="apidocCodeKeywordSpan">get</span>(&#x27;foo&#x27;));

// that wasn&#x27;t too interesting, here&#x27;s the good part

cache.put(&#x27;houdini&#x27;, &#x27;disappear&#x27;, 100, function(key, value) {
    console.log(key + &#x27; did &#x27; + value);
}); // Time in ms
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.hits" id="apidoc.element.memory-cache.hits">
        function <span class="apidocSignatureSpan">memory-cache.</span>hits
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hits = function () {
  return hitCount;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  expect(cache.size()).to.equal(0);
});

it(&#x27;should reset the debug cache hits&#x27;, function() {
  cache.debug(true);
  cache.put(&#x27;key&#x27;, &#x27;value&#x27;);
  cache.get(&#x27;key&#x27;);
  expect(cache.<span class="apidocCodeKeywordSpan">hits</span>()).to.equal(1);
  cache.clear();
  expect(cache.hits()).to.equal(0);
});

it(&#x27;should reset the debug cache misses&#x27;, function() {
  cache.debug(true);
  cache.put(&#x27;key&#x27;, &#x27;value&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.keys" id="apidoc.element.memory-cache.keys">
        function <span class="apidocSignatureSpan">memory-cache.</span>keys
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">keys = function () {
  return Object.keys(cache);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

exports.misses = function() {
  return missCount;
};

exports.keys = function() {
  return Object.<span class="apidocCodeKeywordSpan">keys</span>(cache);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.memsize" id="apidoc.element.memory-cache.memsize">
        function <span class="apidocSignatureSpan">memory-cache.</span>memsize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">memsize = function () {
  var size = 0,
    key;
  for (key in cache) {
    size++;
  }
  return size;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  describe(&#x27;memsize()&#x27;, function() {
before(function() {
  cache.debug(false);
});

it(&#x27;should return 0 given a fresh cache&#x27;, function() {
  expect(cache.<span class="apidocCodeKeywordSpan">memsize</span>()).to.equal(0);
});

it(&#x27;should return 1 after adding a single item to the cache&#x27;, function() {
  cache.put(&#x27;key&#x27;, &#x27;value&#x27;);
  expect(cache.memsize()).to.equal(1);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.misses" id="apidoc.element.memory-cache.misses">
        function <span class="apidocSignatureSpan">memory-cache.</span>misses
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">misses = function () {
  return missCount;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  expect(cache.hits()).to.equal(0);
});

it(&#x27;should reset the debug cache misses&#x27;, function() {
  cache.debug(true);
  cache.put(&#x27;key&#x27;, &#x27;value&#x27;);
  cache.get(&#x27;miss1&#x27;);
  expect(cache.<span class="apidocCodeKeywordSpan">misses</span>()).to.equal(1);
  cache.clear();
  expect(cache.misses()).to.equal(0);
});

it(&#x27;should cancel the timeout callbacks for all existing keys&#x27;, function() {
  var spy1 = sinon.spy();
  var spy2 = sinon.spy();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.put" id="apidoc.element.memory-cache.put">
        function <span class="apidocSignatureSpan">memory-cache.</span>put
        <span class="apidocSignatureSpan">(key, value, time, timeoutCallback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">put = function (key, value, time, timeoutCallback) {
  if (debug) {
    console.log(&#x27;caching: %s = %j (@%s)&#x27;, key, value, time);
  }

  if (typeof time !== &#x27;undefined&#x27; &#x26;&#x26; (typeof time !== &#x27;number&#x27; || isNaN(time) || time &#x3c;= 0)) {
    throw new Error(&#x27;Cache timeout must be a positive number&#x27;);
  } else if (typeof timeoutCallback !== &#x27;undefined&#x27; &#x26;&#x26; typeof timeoutCallback !== &#x27;function&#x27;) {
    throw new Error(&#x27;Cache timeout callback must be a function&#x27;);
  }

  var oldRecord = cache[key];
  if (oldRecord) {
    clearTimeout(oldRecord.timeout);
  } else {
    size++;
  }

  var record = {
    value: value,
    expire: time + Date.now()
  };

  if (!isNaN(record.expire)) {
    record.timeout = setTimeout(function() {
      _del(key);
      if (timeoutCallback) {
        timeoutCallback(key, value);
      }
    }, time);
  }

  cache[key] = record;

  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
## Usage

```javascript
var cache = require(&#x27;memory-cache&#x27;);

// now just use the cache

cache.<span class="apidocCodeKeywordSpan">put</span>(&#x27;foo&#x27;, &#x27;bar&#x27;);
console.log(cache.get(&#x27;foo&#x27;));

// that wasn&#x27;t too interesting, here&#x27;s the good part

cache.put(&#x27;houdini&#x27;, &#x27;disappear&#x27;, 100, function(key, value) {
    console.log(key + &#x27; did &#x27; + value);
}); // Time in ms
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.memory-cache.size" id="apidoc.element.memory-cache.size">
        function <span class="apidocSignatureSpan">memory-cache.</span>size
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">size = function () {
  return size;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  expect(cache.get(&#x27;key&#x27;)).to.equal(&#x27;value&#x27;);
  expect(cache.del(&#x27;key&#x27;)).to.be.true;
  expect(cache.get(&#x27;key&#x27;)).to.be.null;
});

it(&#x27;should decrement the cache size by 1&#x27;, function() {
  cache.put(&#x27;key&#x27;, &#x27;value&#x27;);
  expect(cache.<span class="apidocCodeKeywordSpan">size</span>()).to.equal(1);
  expect(cache.del(&#x27;key&#x27;)).to.be.true;
  expect(cache.size()).to.equal(0);
});

it(&#x27;should not remove other keys in the cache&#x27;, function() {
  cache.put(&#x27;key1&#x27;, &#x27;value1&#x27;);
  cache.put(&#x27;key2&#x27;, &#x27;value2&#x27;);
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
